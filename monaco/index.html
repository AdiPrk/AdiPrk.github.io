<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeMirror in Ultralight</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.12/codemirror.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.12/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.12/mode/javascript/javascript.min.js"></script>
    <style>
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; }
        .CodeMirror { height: 100vh; width: 100%; }
    </style>
</head>
<body>
    <textarea id="editor"></textarea>

    <script>
        var editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
            mode: "javascript",
            theme: "default",
            lineNumbers: true
        });

        window.onkeydown = function (e) {
            console.log("Key " + e.key + " down");
        };

        // window on key u
        window.onkeyup = function (e) {
            console.log("Key " + e.key + " up");
            // editor.getDoc().replaceSelection(e.key); 
        }
    </script>
</body>
</html>
